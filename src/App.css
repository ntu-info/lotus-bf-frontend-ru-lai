
/* App.css baseline (hoverless look is enforced inline in App.jsx too) */
:root {
  /* Light-mode defaults: light background and dark text */
  --bg: #ffffff;
  --fg: #0b0b0b; /* keep main text black */
  --muted: #4b5563;
  --border: #e6edf8;
  --radius: 12px;
  --primary-600: #1d4ed8;
  --primary-500: #2563eb;
  --accent: #059669;
  --card-shadow: 0 8px 20px rgba(15,23,42,0.06);
  --btn-font-size: 13px;
  --btn-py: 8px;
  --btn-px: 12px;
  --btn-radius: 10px;
  /* Query input (professional theme) - light mode */
  --qb-bg: #ffffff;
  --qb-border: #d1d5db;
  --qb-text: #0b0b0b;
  --qb-placeholder: #6b7280;
  --qb-focus-ring: rgba(37,99,235,0.18);
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.app {
  max-width: none;
  margin: 0;
  padding: 18px 0 18px 18px;
}

/* Dark theme overrides */
.theme-dark {
  /* Deeper/darker variant for actual dark mode */
  --bg: #071025; /* deep navy black */
  --fg: #e6eef8; /* title/subtitle color stays light when forced */
  --muted: #9aa8bd;
  --border: rgba(255,255,255,0.06);
  --primary-600: #60a5fa;
  --primary-500: #3aa0ff;
  --card-shadow: 0 10px 30px rgba(2,6,10,0.75);
  /* Query input colors for dark mode (professional muted tones) */
  --qb-bg: #0f1724;
  --qb-border: #1f2937;
  --qb-text: #e6eef8;
  --qb-placeholder: #9aa8bd;
  --qb-focus-ring: rgba(96,165,250,0.16);
}

/* User requested: in dark mode, keep the title/subtitle light but make other body text dark/black for contrast */
.theme-dark .app__title, .theme-dark .app__subtitle {
  color: var(--fg) !important; /* keep title and subtitle light */
}
/* In both modes keep content text black for your request */
.app, .card, .card * { color: #0b0b0b; }
/* In dark mode, make page background deep and cards slightly darker (but still provide contrast for black text) */
.theme-dark { background-color: var(--bg); }
.theme-dark .card { background: linear-gradient(180deg, #f3f6f9, #edf3fb); box-shadow: var(--card-shadow); border: 1px solid rgba(255,255,255,0.04); }

/* smooth color transitions when toggling theme */
.app, .card, body {
  transition: background-color 220ms ease, color 220ms ease;
}

.app__header { margin-bottom: 14px; }
.app__title { margin: 0; font-size: 22px; font-weight: 800; letter-spacing: .2px; }
.app__subtitle { margin-top: 4px; color: var(--muted); font-size: 13px; max-width: 48ch; }

.app__subtitle-line { display: block; line-height: 1.05; }
.app__subtitle-line + .app__subtitle-line { margin-top: 2px; }

/* Header layout: logo on far left, title/subtitle to the right */
.app__header { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
.app__header-left { display: flex; align-items: center; gap: 16px; }
.app__logo-img { width: 84px; height: auto; object-fit: contain; border-radius: 6px; }
.app__title-block { display: flex; flex-direction: column; align-items: flex-start; }

/* Keep title styling the same (weight/color/size preserved) */
.app__title { font-weight: 800; color: var(--fg); font-size: 24px; }

/* Responsive: stack logo above text on small screens */
@media (max-width: 768px) {
  .app__header { flex-direction: column; align-items: center; text-align: center; }
  .app__header-left { flex-direction: column; gap: 8px; }
  .app__title-block { align-items: center; }
  .app__subtitle { max-width: 100%; }
  .app__subtitle-line { text-align: center; }
  .app__logo-img { width: 72px; }
}

/* Slightly larger title for dashboard feel */
.app__title { font-size: 24px; letter-spacing: .4px }

.app__grid { display: flex; gap: 0; width: 100%; }
.app__grid > .card { flex: 1 1 0; min-width: 240px; overflow: auto; }

.resizer { width: 8px; cursor: col-resize; position: relative; user-select: none; touch-action: none; align-self: stretch; background: transparent; }
.resizer::after { content:''; position:absolute; top:12px; bottom:12px; left:3px; width:2px; background: linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.02)); border-radius:2px; }
.resizer:hover::after { background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.04)); }

.card { background: linear-gradient(180deg, #ffffff, #fbfdff); border: 1px solid rgba(34,67,120,0.04); border-radius: var(--radius); padding:14px; box-shadow: var(--card-shadow); }
.card__title { font-weight:700; margin-bottom:12px; color: var(--fg); }
/* Force section titles to black for readability across modes */
.terms .card__title, .studies .card__title, .niiviewer .card__title, .qb .card__title {
  color: #0b0b0b !important;
}
.card--stack > .divider { height:1px; background:var(--border); margin:12px 0; }

.hint { margin-top: 8px; color: var(--muted); font-size: 12px; }
.hint__code { background:#f3f4f6; padding:2px 6px; border-radius:8px; }

/* Downsized buttons (no hover/active change) */
button, .btn, [role="button"], .button {
  background: linear-gradient(180deg, var(--primary-600), var(--primary-500));
  color:#fff;
  border:none;
  border-radius: var(--btn-radius);
  padding: var(--btn-py) var(--btn-px);
  font-weight:700;
  font-size: var(--btn-font-size);
  line-height:1.1;
  cursor:pointer;
  box-shadow: 0 6px 14px rgba(31,111,235,0.12);
}
button:hover, .btn:hover, [role="button"]:hover, .button:hover,
button:active, .btn:active, [role="button"]:active, .button:active {
  background: var(--primary-600);
  color: #fff;
}
button:disabled, .btn:disabled { opacity:.55; cursor:not-allowed; }

.card input[type="text"],
.card input[type="search"],
.card input[type="number"],
.card select,
.card textarea { width:100%; max-width:100%; display:block; }

/* Sliders and controls - modern look */
input[type=range] {
  appearance: none;
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  background: linear-gradient(90deg, rgba(37,99,235,0.15), rgba(37,99,235,0.05));
  border-radius: 999px;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px; height: 16px; border-radius: 50%; background: #fff; border: 3px solid var(--primary-600);
  box-shadow: 0 4px 8px rgba(31,111,235,0.18);
}
input[type=range]:focus { outline: none; }

/* NiiViewer canvas card subtle style */
.niiviewer-card { background: linear-gradient(180deg,#ffffff,#f7fbff); border-radius: 10px; padding: 10px; border: 1px solid rgba(34,67,120,0.04); }

/* Polished Threshold controls for NiiViewer */
.niiviewer-controls {
  background: linear-gradient(180deg, rgba(250,252,255,0.6), rgba(244,247,251,0.45));
  border-radius: 10px;
  padding: 12px;
  border: 1px solid rgba(15,23,42,0.04);
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
}
.niiviewer-controls .threshold-row {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
}
.niiviewer-controls label.niilabel {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--muted);
  font-weight: 600;
  font-size: 13px;
  min-width: 140px; /* keeps labels aligned */
}
.niiviewer-controls .controls--modern {
  display: flex;
  gap: 12px;
  align-items: center;
}
.niiviewer-controls .controls--field {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--qb-bg, #ffffff);
  border: 1px solid var(--qb-border, #d1d5db);
  padding: 6px 8px;
  border-radius: 8px; /* rounded-md feel */
  box-shadow: 0 6px 14px rgba(2,6,23,0.04);
}
.niiviewer-controls .threshold-row.bar-black {
  /* Softer layered dark bar so controls remain prominent */
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.42));
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.04);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02), 0 10px 24px rgba(2,6,23,0.28);
  backdrop-filter: saturate(110%) blur(2px);
}
.niiviewer-controls .threshold-row.bar-black label,
.niiviewer-controls .threshold-row.bar-black .controls--field {
  background: transparent;
  border: none;
  box-shadow: none;
}
.niiviewer-controls .threshold-row.bar-black .niilabel { color: rgba(230,238,248,0.98); }
.niiviewer-controls .threshold-row.bar-black select,
.niiviewer-controls .threshold-row.bar-black input[type='number'] {
  color: rgba(230,238,248,0.98);
  background: transparent;
}

/* Make the field boxes inside the threshold row slightly translucent to lift them */
.niiviewer-controls .threshold-row.bar-black .controls--field {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 8px 10px;
  border-radius: 10px;
  box-shadow: 0 6px 16px rgba(2,6,23,0.12);
}
/* select options are hard to style cross-browser, but set the optgroup/option color where supported */
.niiviewer-controls .threshold-row.bar-black option { color: #111111; background: #ffffff; }

/* Dark control panel: deep background, white text, soft glow on focus */

/* Capsule control style (reusable): rounded, subtle shadow, adaptable background via --qb-bg */
.controls--capsule {
  background: var(--qb-bg, #0f1724);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 8px;
  box-shadow: 0 8px 20px rgba(2,6,23,0.12);
}
.controls--capsule .controls--field {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.04);
  box-shadow: 0 6px 14px rgba(2,6,23,0.06);
}
.controls--capsule select,
.controls--capsule input[type='number'],
.controls--capsule input[type='text'],
.controls--capsule .terms .input {
  color: var(--qb-text, #e6eef8);
  background: transparent;
  border: none;
}
.controls--capsule ::placeholder { color: rgba(230,238,248,0.7); }
.controls--capsule select:focus,
.controls--capsule input[type='number']:focus,
.controls--capsule input[type='text']:focus {
  outline: none;
  box-shadow: 0 10px 30px rgba(37,99,235,0.18);
  border-color: rgba(96,165,250,0.9);
}
.controls--capsule .niilabel { color: rgba(230,238,248,0.96); font-weight:600 }

/* keep a separate bar-black utility for only the threshold row when desired */
.niiviewer-controls .threshold-row.bar-black {
  background: #0b0b0b;
  padding: 8px 10px;
  border-radius: 10px;
}
.niiviewer-controls .threshold-row.bar-black label,
.niiviewer-controls .threshold-row.bar-black .controls--field {
  background: transparent;
  border: none;
  box-shadow: none;
}
.niiviewer-controls .threshold-row.bar-black .niilabel { color: #ffffff; }
.niiviewer-controls .threshold-row.bar-black select,
.niiviewer-controls .threshold-row.bar-black input[type='number'] {
  color: #ffffff;
  background: transparent;
}
.niiviewer-controls select,
.niiviewer-controls input[type='number'] {
  height: 36px;
  line-height: 1;
  padding: 6px 8px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--qb-text, #0b0b0b);
  font-size: 14px;
}
.niiviewer-controls input[type='number'] { width: 110px; }
.niiviewer-controls input[type='number'] { width: 110px; }
.niiviewer-controls .small-input { width: 84px; }
.niiviewer-controls select:focus,
.niiviewer-controls input[type='number']:focus {
  outline: none;
  border-color: var(--primary-600);
  box-shadow: 0 6px 18px var(--qb-focus-ring, rgba(37,99,235,0.12));
}
.niiviewer-controls .hint { color: var(--muted); font-size: 12px; margin-left: 4px; }

/* Modern controls used by Terms search and threshold rows */
.controls--modern .label {
  font-size: 13px;
  color: var(--muted);
  font-weight: 600;
}
.controls--modern .field {
  background: var(--qb-bg, #ffffff);
  border: 1px solid var(--qb-border, #d1d5db);
  padding: 6px 8px;
  border-radius: 8px;
  box-shadow: 0 6px 14px rgba(2,6,23,0.04);
  height: 36px;
  display: flex;
  align-items: center;
}
.terms .input, .terms input[type='search'], .terms input[type='text'] {
  border: 1px solid var(--qb-border);
  background: var(--qb-bg);
  color: var(--qb-text);
  padding: 6px 10px;
  border-radius: 8px;
  box-shadow: 0 6px 14px rgba(2,6,23,0.04);
  height: 36px;
}

/* Make sure controls align nicely on smaller screens */
@media (max-width: 768px) {
  .niiviewer-controls .controls--modern { flex-direction: column; align-items: stretch; }
  .niiviewer-controls label.niilabel { min-width: auto; }
  .terms .input { width: 100%; }
}

/* Terms accordion transitions */
.terms__panel {
  overflow: hidden;
  transition: max-height 260ms cubic-bezier(.2,.9,.2,1), opacity 180ms ease;
  max-height: 0;
  opacity: 0;
}
.terms__panel.open {
  max-height: 1200px; /* large enough for content; transition will animate */
  opacity: 1;
}

.terms__alphabet-grid > div { display: flex; flex-direction: column; align-items: center; }

/* Stacked alphabet buttons: letter above, count below */
.terms__alpha-button {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(34,67,120,0.06);
  background: var(--bg, #fff);
  min-width: 48px;
  height: 56px;
  cursor: pointer;
  transition: background-color 160ms ease, transform 120ms ease, box-shadow 160ms ease;
}

/* refined alphabet button visuals */
.terms__alpha-button {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(17,24,39,0.06);
  background: var(--card-bg, #ffffff);
  min-width: 52px;
  height: 64px;
  cursor: pointer;
  transition: background-color 160ms ease, transform 120ms ease, box-shadow 160ms ease, border-color 160ms ease;
}
.terms__alpha-button:hover { transform: translateY(-3px); box-shadow: 0 10px 26px rgba(15,23,42,0.08); }
.terms__alpha-button.open { background: linear-gradient(180deg,#f3f6f9,#eef4fb); border-color: rgba(34,67,120,0.14); }
.terms__alpha-letter { font-size: 18px; font-weight: 800; line-height: 1; color: var(--fg, #0b0b0b); letter-spacing: 0.6px }
.terms__alpha-count { font-size: 12px; color: var(--muted); line-height: 1; }
.terms__alpha-count.badge {
  display: inline-flex; align-items: center; justify-content: center;
  min-width: 26px; height: 20px; padding: 0 6px; border-radius: 10px;
  background: rgba(15,23,42,0.04); color: var(--muted); font-weight:600; font-size:12px;
}

/* Dark-mode adaptation for alphabet buttons */
.theme-dark .terms__alpha-button { background: linear-gradient(180deg,#07245a,#05203f); border-color: rgba(255,255,255,0.04); }
.theme-dark .terms__alpha-button:hover { transform: translateY(-3px); box-shadow: 0 12px 30px rgba(2,16,70,0.28); }
.theme-dark .terms__alpha-button.open { background: linear-gradient(180deg,#0a3a7a,#07245a); border-color: rgba(255,255,255,0.08); box-shadow: 0 12px 32px rgba(2,16,70,0.32); }
.theme-dark .terms__alpha-letter { color: #ffffff }
.theme-dark .terms__alpha-count.badge { background: rgba(255,255,255,0.06); color: #ffffff }

@media (max-width: 768px) {
  .terms__alpha-button { min-width: 42px; height: 48px; padding: 6px 8px; }
  .terms__alpha-letter { font-size: 15px }
  .terms__alpha-count { font-size: 11px }
}

/* Ensure certain app regions always use black text regardless of theme */
.terms, .qb, .niiviewer, .studies {
  color: #0b0b0b;
}
.terms * , .qb * , .niiviewer * , .studies * { color: inherit; }

/* Ensure Terms specifically remain black even under theme-dark or utility class overrides */
.theme-dark .terms, .theme-dark .terms * {
  color: #0b0b0b !important;
}

/* User request: make `terms` text always black in every theme */
.terms, .terms * {
  color: #0b0b0b !important;
}

.app__footer { margin-top:16px; color:var(--muted); font-size:12px; display:flex; gap:10px; align-items:center; border-top:1px solid var(--border); padding-top:12px; }

@media (max-width: 1023px) {
  .app { padding: 12px; }
  .app__grid { flex-direction: column; }
  .resizer { display: none; }
}


/* QueryBuilder fallback styles (when Tailwind classes are not present) */
.qb__input {
  width: 100%;
  max-width: 100%;
  display: block;
  padding: 10px 14px;
  border: 1px solid var(--qb-border);
  background: var(--qb-bg);
  color: var(--qb-text);
  border-radius: 12px;
  outline: none;
  box-shadow: 0 6px 12px rgba(2,6,23,0.04);
  transition: box-shadow 160ms ease, border-color 160ms ease, background-color 160ms ease;
}

.qb__input:focus {
  box-shadow: 0 6px 18px var(--qb-focus-ring);
  border-color: var(--primary-600);
}
.qb__input::placeholder { color: var(--qb-placeholder); }


/* Ensure QueryBuilder input doesn't collapse too narrow */
.qb { width: 100%; }
.qb__input { width: 100%; min-width: 420px; }
@media (min-width: 1024px) {
  .qb__input { min-width: 640px; }
}
